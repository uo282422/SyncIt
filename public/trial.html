<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/stylesCalendario.css">
    <title>Calendario Dinámico</title>
    
</head>
<body>
    <form id="myForm" action="/sendDate" method="POST">
        <div class="calendar">
            <div id="calendar-header" class="calendar-header"></div>
            <div class="calendar-grid" id="calendar-grid">
                
                <div class="day-name">Lunes</div>
                <div class="day-name">Martes</div>
                <div class="day-name">Miércoles</div>
                <div class="day-name">Jueves</div>
                <div class="day-name">Viernes</div>
                <div class="day-name">Sábado</div>
                <div class="day-name">Domingo</div>
            </div>
        </div>
    </form>
    <script>
       function generateCalendar(month, year) {
            const calendarHeader = document.getElementById('calendar-header');
            const calendarGrid = document.getElementById('calendar-grid');

            // Elimina los días previos (debe eliminar todo excepto los nombres de los días)
            while (calendarGrid.children.length > 7) {
                calendarGrid.removeChild(calendarGrid.lastChild);
            }

            const monthNames = ["Enero", "Febrero", "Marzo", "Abril", "Mayo", "Junio", "Julio", "Agosto", "Septiembre", "Octubre", "Noviembre", "Diciembre"];
            calendarHeader.textContent = `${monthNames[month]} ${year}`;

            const firstDay = new Date(year, month, 1).getDay();
            // Ajusta el primer día para que sea sábado en lugar de domingo
            const startingDay = firstDay === 0 ? 6 : firstDay - 1;
            const daysInMonth = new Date(year, month + 1, 0).getDate();

            // Añade espacios vacíos para los días previos al primer día del mes
            for (let i = 0; i < startingDay; i++) {
                const emptyCell = document.createElement('div');
                emptyCell.classList.add('empty');
                calendarGrid.appendChild(emptyCell);
            }

            // Añade los días del mes
            for (let day = 1; day <= daysInMonth; day++) {
                const dayCell = document.createElement('div');
                dayCell.textContent = day;
                dayCell.addEventListener('click', () => setIdx(day));
                calendarGrid.appendChild(dayCell);
            }

            // Añade espacios vacíos para completar la última fila del calendario
            const totalCells = startingDay + daysInMonth;
            const emptyCellsAtEnd = (7 - (totalCells % 7)) % 7;
            for (let i = 0; i < emptyCellsAtEnd; i++) {
                const emptyCell = document.createElement('div');
                emptyCell.classList.add('empty');
                calendarGrid.appendChild(emptyCell);
            }
        }

        // Obtiene la fecha actual y genera el calendario
        const today = new Date();
        const currentMonth = today.getMonth();
        const currentYear = today.getFullYear();
        generateCalendar(currentMonth, currentYear);

        function setIdx(day) {
            console.log("El día seleccionado es:", day);
            
        }
    </script>
</body>
</html>
